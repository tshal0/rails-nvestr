<% content_for :sidebar do %>
<!-- sidebar content -->

<% end %>

<div class="exchange">
	<h1>Exchange</h1>
	<h3>Trade stocks here.</h3>

	<table class="table table-line">
		<tbody><tr><td></td></tr></tbody>
	</table>

	<%= link_to create_trade_path, :remote => true, class: 'btn btn-primary btn-add-user' do %>
		 <span class="glyphicon"></span>
		 Create Order
	<% end %>
<!--  -->
	

	<table class="table table-bordered table-datatable">
		<thead>
			<tr>
				<% @headers.each do | header | %>
					<td>
						<%= header %>
					</td>
				<% end %>
			</tr>
		</thead>
		<tbody>
			<% @stocks.each do |stock| %>
				<tr id="<%=	stock.id %>">
					<td><%=	stock.stock_name %></td>
					<td><%= stock.sector %></td>
					<td><%= stock.industry %></td>
					<td>
						<%= link_to stocks_path(:stock_symbol => stock.stock_symbol) do %>
							<span><%= stock.stock_symbol %></span>
						<% end %>
					</td>
					<td><%=	number_to_currency(stock.stock_price) %></td>
					<td><%= stock.updated_at.to_date %></td>
					<td>
						<div class="center">
							<%= link_to create_trade_path(:stock_id => stock.id), :remote => true, class: 'btn btn-primary' do %>
								<span>Trade</span>
							<% end %>
						</div>
					</td>
				</tr>
			<% end	%>
		</tbody>
	</table>
</div>

<script type="text/javascript">
	var dataTable = $('.table-datatable').DataTable();

	document.addEventListener("turbolinks:before-cache", function() {
	  if (dataTable !== null) {
	   dataTable.destroy();
	   dataTable = null;
	  }
	});
</script>